## 力扣8. 字符串转换整数 (atoi)

请你来实现一个 atoi 函数，使其能将字符串转换成整数。

首先，该函数会根据需要丢弃无用的开头空格字符，直到寻找到第一个非空格的字符为止。接下来的转化规则如下：

如果第一个非空字符为正或者负号时，则将该符号与之后面尽可能多的连续数字字符组合起来，形成一个有符号整数。
假如第一个非空字符是数字，则直接将其与之后连续的数字字符组合起来，形成一个整数。
该字符串在有效的整数部分之后也可能会存在多余的字符，那么这些字符可以被忽略，它们对函数不应该造成影响。
注意：假如该字符串中的第一个非空格字符不是一个有效整数字符、字符串为空或字符串仅包含空白字符时，则你的函数不需要进行转换，即无法进行有效转换。

在任何情况下，若函数不能进行有效的转换时，请返回 0 。

#### 解题思路

采用有限状态机的算法思想解决

状态较少并且各个状态之间变换的逻辑比较简单时，使用switch语句实现的有限状态机能很好的工作。

状态机的状态非常多，转换关系异常复杂，那么简单的用switch语句构造出来的状态机将难以维护和拓展。

使用<u>**状态表**</u>的方案是较为良好的维护方案

维护一个二维状态表，横坐标表示当前状态，纵坐标表示输入，表中一个元素存储下一个状态和对应的操作。这一招易于维护，但是运行时间和存储空间的代价较大。

```python
INT_MAX = 2**31-1
INT_MIN = 2**31

class Automaton:
    def __init__(self):
        self.state = 'start'
        self.sign = 1
        self.ans = 0
        self.table = {
            'start':['start','signed','int_number','end'],
            'signed':['end','end','int_number','end'],
            'int_number':['end','end','int_number','end'],
            'end':['end','end','end','end'],
        }
    def get_col(self,c):
        if c.isspace():			#如果字符串中只包含空白，返回True，否则换回False
            return 0
        if c == '+' or c == '-':
            return 1
        if c.isdigit():			#如果字符串只包含数字返回True否则返回False
            return 2
        return 3
    
    def get(self,c):
        self.state = self.table[self.state][self.get_col(c)]#寻找表中的位置
        if self.state == 'int_number':
            self.ans = self.ans * 10 + int(c)
            self.ans = min(self.ans,INT_MAX) if self.sign == 1 else min(self.ans,INT_MIN)
        elif self.state == 'signed':
            self.sign = 1 if c == '+' else -1
            
class Solution:
    def myAtoi(self, str: str) -> int:
        automaton = Automaton()
        for c in str:
            automaton.get(c)
        return automaton.sign * automaton.ans
```

